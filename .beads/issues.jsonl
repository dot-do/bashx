{"id":"BASHX-04m","title":"[GREEN] Implement extractBaseCommand utility","description":"Implement the extractBaseCommand utility function that parses a bash command string and extracts the base command name.\n\n## Acceptance Criteria\n- Extracts the first command from a pipeline\n- Handles commands with leading environment variables (VAR=value cmd)\n- Handles commands with sudo/doas prefixes\n- Returns the actual executable name\n\n## Test Cases (already written)\n- Simple command: 'ls -la' -\u003e 'ls'\n- With env var: 'FOO=bar echo hello' -\u003e 'echo'\n- Pipeline: 'cat file | grep pattern' -\u003e 'cat'\n- With sudo: 'sudo rm -rf /' -\u003e 'rm'\n\n## Implementation\nCreate src/safety/extract-base-command.ts with the utility function.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:54:26.626855-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:54:26.626855-06:00","dependencies":[{"issue_id":"BASHX-04m","depends_on_id":"BASHX-cic","type":"blocks","created_at":"2026-01-08T06:56:46.534102-06:00","created_by":"nathanclevenger"}]}
{"id":"BASHX-0b7","title":"[RED] Test command generation from intent","description":"Tests generating valid bash commands from parsed intent objects. Should produce executable commands that match the user's intent while respecting safety constraints.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:55:25.193773-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:55:25.193773-06:00"}
{"id":"BASHX-0h4","title":"[GREEN] Implement bash_undo handler","description":"Implement the bash_undo MCP tool handler to make the RED phase tests pass. This handler should undo the last bash command or provide rollback functionality.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:55:34.75778-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:55:34.75778-06:00","dependencies":[{"issue_id":"BASHX-0h4","depends_on_id":"BASHX-t2p","type":"blocks","created_at":"2026-01-08T06:56:53.400211-06:00","created_by":"nathanclevenger"}]}
{"id":"BASHX-0ob","title":"[RED] Test SafetyReport generation","description":"Tests for SafetyReport generation that provides comprehensive safety analysis.\n\n## SafetyReport Schema\n\n- command: string (original command)\n- classification: CommandClassification\n- risks: Risk[] (identified risks)\n- alternatives: Alternative[] (safer alternatives)\n- requiresConfirmation: boolean\n- blockedReason?: string (if command should be blocked)\n\n## Test Cases\n\n### Safe Commands\n- ls, cat, grep should have empty risks, no confirmation needed\n\n### Risky Commands with Alternatives\n- rm -rf dir -\u003e suggest trash-cli or safe-rm\n- chmod 777 -\u003e suggest more restrictive permissions\n- curl | bash -\u003e suggest downloading and inspecting first\n\n### Commands Requiring Confirmation\n- Any command with impact: high or critical\n- Commands with elevation\n- Commands affecting system paths\n\n### Blocked Commands\n- rm -rf / -\u003e blocked with reason\n- Fork bombs -\u003e blocked with reason\n- dd to system disk -\u003e blocked with reason\n\n### Alternative Suggestions\n- rm -\u003e trash-put, trash-cli\n- kill -9 -\u003e graceful SIGTERM first\n- chmod 777 -\u003e chmod 755 or more specific\n\n## Acceptance Criteria\n\n- [ ] All tests written in RED phase (failing)\n- [ ] Tests verify risk identification\n- [ ] Tests verify alternative suggestions\n- [ ] Tests verify confirmation requirements\n- [ ] Tests verify blocking of dangerous commands","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:54:44.591699-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:54:44.591699-06:00"}
{"id":"BASHX-0y2","title":"[GREEN] Implement bash_complete handler","description":"Implement the bash_complete MCP tool handler to make the RED phase tests pass. This handler should provide tab-completion suggestions for partial commands.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:55:30.783596-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:55:30.783596-06:00","dependencies":[{"issue_id":"BASHX-0y2","depends_on_id":"BASHX-j82","type":"blocks","created_at":"2026-01-08T06:56:53.284251-06:00","created_by":"nathanclevenger"}]}
{"id":"BASHX-0z6","title":"[RED] Test bash_pipe MCP tool","description":"Phase 2 (MCP Tools) RED tests for bash_pipe tool.\n\n## Tests to implement:\n- Tests pipeline chaining\n\n## Acceptance Criteria:\n- All tests written following RED phase (tests fail initially)\n- Tests verify correct pipeline construction\n- Tests verify data flows correctly between chained commands","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:54:28.466052-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:54:28.466052-06:00"}
{"id":"BASHX-1j1","title":"[RED] Test natural language intent parsing","description":"Tests extracting intent from queries like 'list all typescript files'. Should parse natural language into structured intent objects with action, target, filters, and options.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:55:23.133196-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:55:23.133196-06:00"}
{"id":"BASHX-1uy","title":"[RED] Test tagged template parsing","description":"Tests bashx`query` template literal handling. Should properly parse tagged template literals, interpolate values, and extract the query string for intent processing.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:55:30.370974-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:55:30.370974-06:00"}
{"id":"BASHX-28g","title":"[GREEN] Implement recovery strategies","description":"Implement recovery strategies for Phase 3 (Execution Engine). This is the GREEN phase - implement minimal code to make the RED tests pass.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:54:12.233679-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:54:12.233679-06:00","dependencies":[{"issue_id":"BASHX-28g","depends_on_id":"BASHX-xxb","type":"blocks","created_at":"2026-01-08T06:56:55.582166-06:00","created_by":"nathanclevenger"}]}
{"id":"BASHX-2ak","title":"[RED] Test alternative command suggestions","description":"Tests generating safer alternatives for potentially dangerous commands. Should suggest safer options like dry-run flags, backups, or less destructive approaches.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:55:28.741128-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:55:28.741128-06:00"}
{"id":"BASHX-2az","title":"[RED] Test bash_safe MCP tool","description":"Phase 2 (MCP Tools) RED tests for bash_safe tool.\n\n## Tests to implement:\n- Tests safety analysis\n- Tests risk identification\n\n## Acceptance Criteria:\n- All tests written following RED phase (tests fail initially)\n- Tests verify safety analysis output\n- Tests verify risk levels are correctly identified","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:54:23.483473-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:54:23.483473-06:00"}
{"id":"BASHX-2xl","title":"[RED] Test isReadOnlyCommand classification","description":"Tests for isReadOnlyCommand function that identifies read-only commands.\n\n## Test Cases\n\n### File Inspection Commands\n- ls, ll, la variants\n- cat, head, tail, less, more\n- file, stat, lstat\n\n### Search Commands\n- find, locate, which, whereis\n- grep, egrep, fgrep, rg, ag\n\n### System Info Commands\n- ps, top, htop\n- df, du, free\n- uname, hostname, whoami\n- date, cal, uptime\n\n### Network Info Commands\n- ping (read-only mode)\n- netstat, ss, ip addr\n- dig, nslookup, host\n\n### Git Read Commands\n- git status, git log, git diff\n- git show, git branch\n\n## Acceptance Criteria\n\n- [ ] All tests written in RED phase (failing)\n- [ ] Tests cover all read-only command categories\n- [ ] Tests verify write commands are NOT classified as read-only","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:54:38.521372-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:54:38.521372-06:00"}
{"id":"BASHX-2z4","title":"[RED] Test matchesDangerousPattern detection","description":"Tests for matchesDangerousPattern function that detects dangerous command patterns.\n\n## Test Cases\n\n### Recursive Delete Patterns\n- rm -rf /\n- rm -rf /*\n- rm -rf ~/*\n\n### System Path Patterns\n- Commands targeting /etc, /usr, /bin, /sbin\n- Commands targeting /boot, /dev, /proc, /sys\n\n### Permission Patterns\n- chmod 777 sensitive files\n- chown root operations\n- setuid/setgid operations\n\n### Disk Operations\n- dd if=/dev/zero of=/dev/sda\n- mkfs operations\n- fdisk operations\n\n### Other Dangerous Patterns\n- Fork bombs\n- History clearing\n- Credential file access\n\n## Acceptance Criteria\n\n- [ ] All tests written in RED phase (failing)\n- [ ] Tests cover all dangerous pattern categories\n- [ ] Tests include false positive checks (safe commands that look dangerous)","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:54:37.70129-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:54:37.70129-06:00"}
{"id":"BASHX-32o","title":"[GREEN] Implement natural language intent parser","description":"Implement the natural language intent parser to pass all RED phase tests. This involves parsing user input in natural language and extracting the intended bash command or operation.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:55:26.231074-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:55:26.231074-06:00","dependencies":[{"issue_id":"BASHX-32o","depends_on_id":"BASHX-1j1","type":"blocks","created_at":"2026-01-08T06:56:57.424162-06:00","created_by":"nathanclevenger"}]}
{"id":"BASHX-34v","title":"[RED] Test bash_generate MCP tool","description":"Phase 2 (MCP Tools) RED tests for bash_generate tool.\n\n## Tests to implement:\n- Tests intent to command generation\n- Tests platform-specific output\n\n## Acceptance Criteria:\n- All tests written following RED phase (tests fail initially)\n- Tests verify natural language intent parsing\n- Tests verify correct platform-specific command generation","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:54:25.572138-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:54:25.572138-06:00"}
{"id":"BASHX-484","title":"[RED] Test requiresElevation detection","description":"Tests for requiresElevation function that detects commands requiring elevated privileges.\n\n## Test Cases\n\n### Sudo Variants\n- sudo command\n- sudo -u user command\n- sudo -i, sudo -s\n\n### Su Variants\n- su -c command\n- su - root\n- su username\n\n### Doas (OpenBSD)\n- doas command\n- doas -u user command\n\n### Pkexec (PolicyKit)\n- pkexec command\n\n### Edge Cases\n- Commands with sudo in arguments (not prefix)\n- Nested elevation (sudo su)\n- Commands that typically need elevation but don't have prefix\n\n## Acceptance Criteria\n\n- [ ] All tests written in RED phase (failing)\n- [ ] Tests cover all elevation prefix variants\n- [ ] Tests handle edge cases correctly","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:54:42.202936-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:54:42.202936-06:00"}
{"id":"BASHX-4lv","title":"[GREEN] Implement bash_env handler","description":"Implement the bash_env MCP tool handler to make the RED phase tests pass. This handler should return environment variables available in the bash session.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:55:23.308264-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:55:23.308264-06:00","dependencies":[{"issue_id":"BASHX-4lv","depends_on_id":"BASHX-e4o","type":"blocks","created_at":"2026-01-08T06:56:53.112089-06:00","created_by":"nathanclevenger"}]}
{"id":"BASHX-5nl","title":"[REFACTOR] Create integration test suite","description":"E2E tests for full workflows","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-08T06:55:35.297282-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:55:35.297282-06:00"}
{"id":"BASHX-5sh","title":"[RED] Test command execution with timeout","description":"Phase 3: Execution Engine - RED tests for command execution\n\n## Tests to implement\n\n### Basic execution\n- Execute simple commands and capture output\n- Handle stdin/stdout/stderr streams\n- Support shell expansion and pipes\n\n### Timeout handling\n- Configurable command timeout\n- Graceful termination on timeout\n- Kill signal escalation (SIGTERM -\u003e SIGKILL)\n\n### Exit code capture\n- Capture and return exit codes\n- Distinguish between error codes\n- Handle signal-based termination\n\n## Files\n- test/execution/command.test.ts\n- src/execution/command.ts","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:54:17.773125-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:54:17.773125-06:00"}
{"id":"BASHX-6yh","title":"[RED] Test history recording","description":"Phase 3: Execution Engine - RED tests for history recording\n\n## Tests to implement\n\n### Command history storage\n- Record command, timestamp, duration\n- Record exit code and output summary\n- Record working directory and environment\n- Persist history across sessions\n\n### History search/filter\n- Search by command pattern\n- Filter by date range\n- Filter by exit code (success/failure)\n- Filter by working directory\n\n### History management\n- Limit history size\n- Export/import history\n- Clear history\n\n## Files\n- test/execution/history.test.ts\n- src/execution/history.ts","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:54:23.157915-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:54:23.157915-06:00"}
{"id":"BASHX-7md","title":"bashx.do Core Implementation","description":"Complete implementation of bashx.do - AI-enhanced bash execution with safety, intent understanding, and intelligent recovery.\n\n## Vision\n\nbashx wraps bash with **judgment**. Unlike fsx (reversible) or gitx (versioned), bash commands are dangerous and irreversible. bashx adds an evaluation layer that thinks before executing.\n\n## Architecture\n\n```\nSDK Layer (src/index.ts)\n├── Tagged template: bashx`intent`\n├── Direct methods: run(), explain(), safe(), etc.\n└── RPC client to backend\n\nSafety Layer (src/safety/)\n├── Command classification (type, scope, impact)\n├── Pattern detection (dangerous commands)\n├── Risk assessment\n└── Alternative suggestions\n\nMCP Layer (src/mcp/)\n├── 18 tools for AI assistants\n├── Tool definitions with JSON schemas\n└── Handlers for each tool\n\nOperations Layer (src/ops/)\n├── Command execution\n├── Output parsing\n├── Error recovery\n└── Undo tracking\n```\n\n## Phases\n\n### Phase 1: Core Safety\n- Command classification system\n- Dangerous pattern detection\n- Safety report generation\n\n### Phase 2: MCP Tools (18 total)\n- bash_run, bash_explain, bash_safe\n- bash_generate, bash_dry_run, bash_pipe\n- bash_parse, bash_env, bash_history\n- bash_alias, bash_which, bash_man\n- bash_complete, bash_fix, bash_optimize\n- bash_undo, bash_script, bash_cron\n\n### Phase 3: Execution Engine\n- Command execution with timeout\n- Recovery strategies\n- Undo tracking\n\n### Phase 4: Intent \u0026 Generation\n- Natural language → command\n- Context building\n- Alternative suggestions\n\n### Phase 5: Integration\n- SDK polish\n- E2E tests\n- Documentation","status":"open","priority":0,"issue_type":"epic","created_at":"2026-01-08T06:53:28.569135-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:53:28.569135-06:00"}
{"id":"BASHX-7r2","title":"[GREEN] Implement bash_generate handler","description":"Implement the bash_generate MCP tool handler to make the RED phase tests pass. This handler generates bash commands from natural language descriptions.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:54:17.162801-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:54:17.162801-06:00","dependencies":[{"issue_id":"BASHX-7r2","depends_on_id":"BASHX-34v","type":"blocks","created_at":"2026-01-08T06:56:51.71918-06:00","created_by":"nathanclevenger"}]}
{"id":"BASHX-7ys","title":"[GREEN] Implement command executor with timeout","description":"Implement the command executor with timeout support for Phase 3 (Execution Engine). This is the GREEN phase - implement minimal code to make the RED tests pass.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:54:08.817272-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:54:08.817272-06:00","dependencies":[{"issue_id":"BASHX-7ys","depends_on_id":"BASHX-5sh","type":"blocks","created_at":"2026-01-08T06:56:55.467219-06:00","created_by":"nathanclevenger"}]}
{"id":"BASHX-831","title":"[RED] Test bash_which MCP tool","description":"Write failing RED phase tests for the bash_which MCP tool. Tests should cover:\n\n- Find command location by name\n- Handle commands not found\n- Find multiple command locations\n- Handle aliases and builtins\n- PATH resolution","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:55:31.760532-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:55:31.760532-06:00"}
{"id":"BASHX-8bb","title":"[REFACTOR] Extract safety utilities into pure functions","description":"Separate AI-dependent from pure logic","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-08T06:55:26.894211-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:55:26.894211-06:00"}
{"id":"BASHX-8xc","title":"[GREEN] Implement error categorization","description":"Implement error categorization for Phase 3 (Execution Engine). This is the GREEN phase - implement minimal code to make the RED tests pass.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:54:10.889591-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:54:10.889591-06:00","dependencies":[{"issue_id":"BASHX-8xc","depends_on_id":"BASHX-b1s","type":"blocks","created_at":"2026-01-08T06:56:55.5239-06:00","created_by":"nathanclevenger"}]}
{"id":"BASHX-a1w","title":"[RED] Test bash_fix MCP tool","description":"Phase 2 (MCP Tools) RED tests for bash_fix tool.\n\n## Tests to implement:\n- Tests error analysis and fix suggestions\n\n## Acceptance Criteria:\n- All tests written following RED phase (tests fail initially)\n- Tests verify error pattern recognition\n- Tests verify fix suggestions are actionable","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:54:30.509358-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:54:30.509358-06:00"}
{"id":"BASHX-aa1","title":"[GREEN] Implement history recording","description":"Implement history recording for Phase 3 (Execution Engine). This is the GREEN phase - implement minimal code to make the RED tests pass.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:54:15.206955-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:54:15.206955-06:00","dependencies":[{"issue_id":"BASHX-aa1","depends_on_id":"BASHX-6yh","type":"blocks","created_at":"2026-01-08T06:56:55.699093-06:00","created_by":"nathanclevenger"}]}
{"id":"BASHX-are","title":"[GREEN] Implement undo tracking","description":"Implement undo tracking for Phase 3 (Execution Engine). This is the GREEN phase - implement minimal code to make the RED tests pass.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:54:13.237491-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:54:13.237491-06:00","dependencies":[{"issue_id":"BASHX-are","depends_on_id":"BASHX-mrx","type":"blocks","created_at":"2026-01-08T06:56:55.640065-06:00","created_by":"nathanclevenger"}]}
{"id":"BASHX-auq","title":"[RED] Test CommandClassification schema","description":"Tests for full CommandClassification schema and classifyCommand function.\n\n## Schema Fields\n\n- type: 'read' | 'write' | 'execute' | 'network' | 'system'\n- scope: 'file' | 'directory' | 'process' | 'network' | 'system'\n- impact: 'none' | 'low' | 'medium' | 'high' | 'critical'\n- reversible: boolean\n\n## Test Cases\n\n### Read Commands\n- ls -\u003e type: read, scope: directory, impact: none, reversible: true\n- cat file -\u003e type: read, scope: file, impact: none, reversible: true\n\n### Write Commands\n- touch file -\u003e type: write, scope: file, impact: low, reversible: true\n- rm file -\u003e type: write, scope: file, impact: medium, reversible: false\n- rm -rf dir -\u003e type: write, scope: directory, impact: critical, reversible: false\n\n### Execute Commands\n- ./script.sh -\u003e type: execute, scope: process, impact: medium\n- node app.js -\u003e type: execute, scope: process, impact: medium\n\n### Network Commands\n- curl url -\u003e type: network, scope: network, impact: low\n- wget url -\u003e type: network, scope: network, impact: low\n\n### System Commands\n- systemctl restart -\u003e type: system, scope: system, impact: high\n- reboot -\u003e type: system, scope: system, impact: critical\n\n## Acceptance Criteria\n\n- [ ] All tests written in RED phase (failing)\n- [ ] Tests cover all classification types\n- [ ] Tests verify correct impact levels\n- [ ] Tests verify reversibility assessment","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:54:43.736336-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:54:43.736336-06:00"}
{"id":"BASHX-b02","title":"[RED] Test bash_dry_run MCP tool","description":"Phase 2 (MCP Tools) RED tests for bash_dry_run tool.\n\n## Tests to implement:\n- Tests simulation without side effects\n\n## Acceptance Criteria:\n- All tests written following RED phase (tests fail initially)\n- Tests verify no actual execution occurs\n- Tests verify simulation output is accurate","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:54:27.418037-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:54:27.418037-06:00"}
{"id":"BASHX-b09","title":"[GREEN] Implement tagged template parsing","description":"Implement tagged template parsing to pass all RED phase tests. This involves supporting the tagged template literal syntax (e.g., bash`list files`) for natural language command input.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:55:33.734415-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:55:33.734415-06:00","dependencies":[{"issue_id":"BASHX-b09","depends_on_id":"BASHX-1uy","type":"blocks","created_at":"2026-01-08T06:56:57.648562-06:00","created_by":"nathanclevenger"}]}
{"id":"BASHX-b1s","title":"[RED] Test error categorization","description":"Phase 3: Execution Engine - RED tests for error categorization\n\n## Tests to implement\n\n### Error type identification\n- permission: Permission denied errors\n- not_found: Command or file not found\n- disk_full: No space left on device\n- memory: Out of memory errors\n- network: Connection refused, timeout, DNS failures\n- syntax: Shell syntax errors\n- signal: Process killed by signal\n\n### Error parsing\n- Parse stderr for error patterns\n- Match exit codes to error types\n- Extract relevant error context\n\n## Files\n- test/execution/errors.test.ts\n- src/execution/errors.ts","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:54:19.79658-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:54:19.79658-06:00"}
{"id":"BASHX-be8","title":"[GREEN] Implement command generation from intent","description":"Implement command generation from parsed intent to pass all RED phase tests. This involves converting the extracted intent into valid bash commands that can be executed.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:55:27.375307-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:55:27.375307-06:00","dependencies":[{"issue_id":"BASHX-be8","depends_on_id":"BASHX-0b7","type":"blocks","created_at":"2026-01-08T06:56:57.479859-06:00","created_by":"nathanclevenger"}]}
{"id":"BASHX-bi0","title":"[RED] Test context building integration","description":"Tests building context from fsx and gitx. Should gather relevant file system and git repository context to inform command generation and provide intelligent suggestions.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:55:27.981709-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:55:27.981709-06:00"}
{"id":"BASHX-c26","title":"[RED] Test bash_script MCP tool","description":"Write failing RED phase tests for the bash_script MCP tool. Tests should cover:\n\n- Generate shell script from description\n- Script validation/syntax checking\n- Handle script parameters\n- Script template generation\n- Error handling for invalid scripts","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:55:34.676437-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:55:34.676437-06:00"}
{"id":"BASHX-c3p","title":"[GREEN] Implement bash_parse handler","description":"Implement the bash_parse MCP tool handler to make the RED phase tests pass. This handler parses command output into structured data (JSON).","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:54:21.848319-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:54:21.848319-06:00","dependencies":[{"issue_id":"BASHX-c3p","depends_on_id":"BASHX-m5m","type":"blocks","created_at":"2026-01-08T06:56:51.894282-06:00","created_by":"nathanclevenger"}]}
{"id":"BASHX-c4a","title":"[RED] Test bash_explain MCP tool","description":"Phase 2 (MCP Tools) RED tests for bash_explain tool.\n\n## Tests to implement:\n- Tests explanation generation\n- Tests command breakdown\n\n## Acceptance Criteria:\n- All tests written following RED phase (tests fail initially)\n- Tests verify explanation output format\n- Tests verify command breakdown accuracy","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:54:20.659369-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:54:20.659369-06:00"}
{"id":"BASHX-ced","title":"[GREEN] Implement context building integration","description":"Implement context building integration to pass all RED phase tests. This involves integrating context awareness (current directory, environment, history) into the intent parsing and command generation pipeline.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:55:29.82493-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:55:29.82493-06:00","dependencies":[{"issue_id":"BASHX-ced","depends_on_id":"BASHX-bi0","type":"blocks","created_at":"2026-01-08T06:56:57.537246-06:00","created_by":"nathanclevenger"}]}
{"id":"BASHX-cic","title":"[RED] Test extractBaseCommand utility","description":"Tests for extractBaseCommand utility function that extracts the base command from complex command strings.\n\n## Test Cases\n\n- Extract base command from simple commands (ls, cat, grep)\n- Handle sudo prefix (sudo rm -\u003e rm)\n- Handle pipes (cat file | grep pattern -\u003e cat)\n- Handle semicolons (cd dir; ls -\u003e cd)\n- Handle command substitution\n- Handle environment variable prefixes (ENV=val cmd -\u003e cmd)\n- Handle complex nested commands\n\n## Acceptance Criteria\n\n- [ ] All tests written in RED phase (failing)\n- [ ] Tests cover edge cases for command parsing\n- [ ] Tests follow TDD best practices","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:54:36.360872-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:54:36.360872-06:00"}
{"id":"BASHX-cwp","title":"[REFACTOR] Optimize AI call batching","description":"Batch multiple ai.is() calls for efficiency","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-08T06:55:31.166926-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:55:31.166926-06:00"}
{"id":"BASHX-d6a","title":"[GREEN] Implement bash_explain handler","description":"Implement the bash_explain MCP tool handler to make the RED phase tests pass. This handler explains what a bash command does in plain English.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:54:14.561691-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:54:14.561691-06:00","dependencies":[{"issue_id":"BASHX-d6a","depends_on_id":"BASHX-c4a","type":"blocks","created_at":"2026-01-08T06:56:51.603484-06:00","created_by":"nathanclevenger"}]}
{"id":"BASHX-e4o","title":"[RED] Test bash_env MCP tool","description":"Write failing RED phase tests for the bash_env MCP tool. Tests should cover:\n\n- Get environment variable by name\n- Set environment variable\n- List all environment variables\n- Handle missing/undefined variables\n- Environment variable validation","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:55:28.353144-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:55:28.353144-06:00"}
{"id":"BASHX-ecm","title":"[GREEN] Implement SafetyReport generation","description":"Implement the SafetyReport generation that combines all safety checks into a comprehensive report.\n\n## Acceptance Criteria\n- Aggregates results from all safety checks\n- Generates overall safety verdict: allow, warn, block\n- Provides detailed breakdown of each check\n- Includes recommendations for unsafe commands\n- Supports JSON and human-readable output formats\n\n## Test Cases (already written)\n- Safe command generates 'allow' verdict with green status\n- Caution command generates 'warn' verdict with recommendations\n- Dangerous command generates 'block' verdict with explanation\n- Report includes all component check results\n\n## Implementation\nCreate src/safety/report.ts that orchestrates all safety checks:\n- extractBaseCommand\n- matchesDangerousPattern\n- isReadOnlyCommand\n- requiresElevation\n- CommandClassification (AI)\n\n## Dependencies\n- All previous Phase 1 GREEN implementations","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:54:35.795586-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:54:35.795586-06:00","dependencies":[{"issue_id":"BASHX-ecm","depends_on_id":"BASHX-0ob","type":"blocks","created_at":"2026-01-08T06:56:46.821656-06:00","created_by":"nathanclevenger"}]}
{"id":"BASHX-ev2","title":"[GREEN] Implement isReadOnlyCommand classification","description":"Implement the isReadOnlyCommand function that classifies commands as read-only (safe) or write (potentially dangerous).\n\n## Acceptance Criteria\n- Identifies read-only commands: ls, cat, grep, find, head, tail, wc, etc.\n- Identifies write commands: rm, mv, cp, dd, chmod, chown, etc.\n- Handles command aliases and full paths\n- Returns boolean indicating read-only status\n\n## Test Cases (already written)\n- 'ls -la' -\u003e true (read-only)\n- 'cat /etc/passwd' -\u003e true (read-only)\n- 'grep pattern file' -\u003e true (read-only)\n- 'rm file' -\u003e false (write)\n- 'mv src dst' -\u003e false (write)\n- 'echo hello \u003e file' -\u003e false (write, due to redirect)\n\n## Implementation\nCreate src/safety/read-only-commands.ts with command classification.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:54:29.863706-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:54:29.863706-06:00","dependencies":[{"issue_id":"BASHX-ev2","depends_on_id":"BASHX-2xl","type":"blocks","created_at":"2026-01-08T06:56:46.648145-06:00","created_by":"nathanclevenger"}]}
{"id":"BASHX-f10","title":"[GREEN] Implement bash_safe handler","description":"Implement the bash_safe MCP tool handler to make the RED phase tests pass. This handler checks if a bash command is safe to run and returns a safety assessment.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:54:15.66403-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:54:15.66403-06:00","dependencies":[{"issue_id":"BASHX-f10","depends_on_id":"BASHX-2az","type":"blocks","created_at":"2026-01-08T06:56:51.662351-06:00","created_by":"nathanclevenger"}]}
{"id":"BASHX-fax","title":"[GREEN] Implement bash_dry_run handler","description":"Implement the bash_dry_run MCP tool handler to make the RED phase tests pass. This handler simulates command execution and shows what would happen without actually running the command.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:54:18.539616-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:54:18.539616-06:00","dependencies":[{"issue_id":"BASHX-fax","depends_on_id":"BASHX-b02","type":"blocks","created_at":"2026-01-08T06:56:51.77703-06:00","created_by":"nathanclevenger"}]}
{"id":"BASHX-gvu","title":"[GREEN] Implement CommandClassification with AI","description":"Implement the CommandClassification function that uses AI to classify command intent and risk.\n\n## Acceptance Criteria\n- Uses ai.is() to classify command safety\n- Uses ai.extract() to extract command metadata\n- Classifies intent: file-management, system-admin, development, network, etc.\n- Classifies risk level: safe, caution, dangerous, critical\n- Provides human-readable explanation\n\n## Test Cases (already written)\n- 'ls -la' -\u003e { intent: 'file-management', risk: 'safe' }\n- 'rm -rf node_modules' -\u003e { intent: 'file-management', risk: 'caution' }\n- 'rm -rf /' -\u003e { intent: 'system-admin', risk: 'critical' }\n- 'curl example.com | bash' -\u003e { intent: 'network', risk: 'dangerous' }\n\n## Implementation\nCreate src/safety/ai-classification.ts using ai.is() and ai.extract() from workers/ai.\n\n## Dependencies\n- workers/ai for ai.is() and ai.extract() functions","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:54:34.365936-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:54:34.365936-06:00","dependencies":[{"issue_id":"BASHX-gvu","depends_on_id":"BASHX-auq","type":"blocks","created_at":"2026-01-08T06:56:46.764432-06:00","created_by":"nathanclevenger"}]}
{"id":"BASHX-hp4","title":"[GREEN] Implement matchesDangerousPattern detection","description":"Implement the matchesDangerousPattern function that detects dangerous command patterns.\n\n## Acceptance Criteria\n- Detects rm -rf with dangerous paths (/, /*, ~, etc.)\n- Detects dd commands writing to block devices\n- Detects mkfs/format commands\n- Detects chmod 777 on sensitive paths\n- Detects fork bombs and similar patterns\n- Returns the matched pattern name for reporting\n\n## Test Cases (already written)\n- 'rm -rf /' -\u003e matches 'rm-rf-root'\n- 'dd if=/dev/zero of=/dev/sda' -\u003e matches 'dd-block-device'\n- 'mkfs.ext4 /dev/sda1' -\u003e matches 'mkfs'\n- 'chmod 777 /etc/passwd' -\u003e matches 'chmod-sensitive'\n- ':(){ :|:\u0026 };:' -\u003e matches 'fork-bomb'\n- 'ls -la' -\u003e no match\n\n## Implementation\nCreate src/safety/dangerous-patterns.ts with pattern definitions and matcher.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:54:28.062018-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:54:28.062018-06:00","dependencies":[{"issue_id":"BASHX-hp4","depends_on_id":"BASHX-2z4","type":"blocks","created_at":"2026-01-08T06:56:46.591102-06:00","created_by":"nathanclevenger"}]}
{"id":"BASHX-ipf","title":"[GREEN] Implement requiresElevation detection","description":"Implement the requiresElevation function that detects commands requiring elevated privileges.\n\n## Acceptance Criteria\n- Detects sudo prefix\n- Detects doas prefix\n- Detects commands targeting system paths (/etc, /usr, /var, etc.)\n- Detects commands that typically need root (systemctl, apt, yum, etc.)\n- Returns elevation type: 'sudo', 'doas', 'system-path', 'system-command', or null\n\n## Test Cases (already written)\n- 'sudo apt update' -\u003e 'sudo'\n- 'doas pkg install' -\u003e 'doas'\n- 'vim /etc/hosts' -\u003e 'system-path'\n- 'systemctl restart nginx' -\u003e 'system-command'\n- 'ls ~' -\u003e null (no elevation needed)\n\n## Implementation\nCreate src/safety/elevation-detection.ts with detection logic.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:54:32.444077-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:54:32.444077-06:00","dependencies":[{"issue_id":"BASHX-ipf","depends_on_id":"BASHX-484","type":"blocks","created_at":"2026-01-08T06:56:46.704982-06:00","created_by":"nathanclevenger"}]}
{"id":"BASHX-j82","title":"[RED] Test bash_complete MCP tool","description":"Write failing RED phase tests for the bash_complete MCP tool. Tests should cover:\n\n- Command name auto-completion\n- File path auto-completion\n- Flag/option auto-completion\n- Handle partial input\n- Return completion suggestions list","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:55:32.638874-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:55:32.638874-06:00"}
{"id":"BASHX-jlo","title":"[REFACTOR] Consolidate MCP tool handler patterns","description":"Extract common handler logic","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-08T06:55:27.935475-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:55:27.935475-06:00"}
{"id":"BASHX-js5","title":"[RED] Test bash_run MCP tool","description":"Phase 2 (MCP Tools) RED tests for bash_run tool.\n\n## Tests to implement:\n- Tests tool definition schema\n- Tests execution with safety checks\n\n## Acceptance Criteria:\n- All tests written following RED phase (tests fail initially)\n- Tests cover tool schema validation\n- Tests verify safety checks are enforced during execution","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:54:19.685223-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:54:19.685223-06:00"}
{"id":"BASHX-jzf","title":"[GREEN] Implement bash_history handler","description":"Implement the bash_history MCP tool handler to make the RED phase tests pass. This handler should return the command history from the bash session.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:55:25.818158-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:55:25.818158-06:00","dependencies":[{"issue_id":"BASHX-jzf","depends_on_id":"BASHX-nn1","type":"blocks","created_at":"2026-01-08T06:56:53.170582-06:00","created_by":"nathanclevenger"}]}
{"id":"BASHX-kba","title":"[REFACTOR] Add comprehensive JSDoc documentation","description":"Document all public APIs","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-08T06:55:32.044722-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:55:32.044722-06:00"}
{"id":"BASHX-lcj","title":"[GREEN] Implement bash_run handler","description":"Implement the bash_run MCP tool handler to make the RED phase tests pass. This handler executes bash commands and returns the output.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:54:11.920106-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:54:11.920106-06:00","dependencies":[{"issue_id":"BASHX-lcj","depends_on_id":"BASHX-js5","type":"blocks","created_at":"2026-01-08T06:56:51.544069-06:00","created_by":"nathanclevenger"}]}
{"id":"BASHX-m5m","title":"[RED] Test bash_parse MCP tool","description":"Phase 2 (MCP Tools) RED tests for bash_parse tool.\n\n## Tests to implement:\n- Tests structured output parsing\n\n## Acceptance Criteria:\n- All tests written following RED phase (tests fail initially)\n- Tests verify parsing of various output formats\n- Tests verify structured data extraction accuracy","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:54:29.307201-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:54:29.307201-06:00"}
{"id":"BASHX-mrx","title":"[RED] Test undo tracking","description":"Phase 3: Execution Engine - RED tests for undo tracking\n\n## Tests to implement\n\n### Tracking reversible operations\n- Track file creates (undo: delete)\n- Track file deletes (undo: restore from backup)\n- Track file moves (undo: move back)\n- Track file modifications (undo: restore original)\n- Track directory operations\n\n### Undo execution\n- Execute undo for single operation\n- Execute undo for operation sequence (reverse order)\n- Handle undo failures gracefully\n- Verify state after undo\n\n### Undo limitations\n- Identify non-reversible operations\n- Warn on destructive operations without backup\n\n## Files\n- test/execution/undo.test.ts\n- src/execution/undo.ts","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:54:21.949234-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:54:21.949234-06:00"}
{"id":"BASHX-nn1","title":"[RED] Test bash_history MCP tool","description":"Write failing RED phase tests for the bash_history MCP tool. Tests should cover:\n\n- Search command history\n- Filter history by pattern\n- Get recent commands\n- Handle empty history\n- History pagination/limits","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:55:29.977546-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:55:29.977546-06:00"}
{"id":"BASHX-p9q","title":"[REFACTOR] Create unified error handling","description":"Consistent error types and messages","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-08T06:55:29.95293-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:55:29.95293-06:00"}
{"id":"BASHX-r9f","title":"[GREEN] Implement alternative command suggestions","description":"Implement alternative command suggestions to pass all RED phase tests. This involves generating multiple possible command interpretations when the intent is ambiguous, allowing users to select the most appropriate option.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:55:32.091027-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:55:32.091027-06:00","dependencies":[{"issue_id":"BASHX-r9f","depends_on_id":"BASHX-2ak","type":"blocks","created_at":"2026-01-08T06:56:57.59318-06:00","created_by":"nathanclevenger"}]}
{"id":"BASHX-svk","title":"[GREEN] Implement bash_pipe handler","description":"Implement the bash_pipe MCP tool handler to make the RED phase tests pass. This handler executes a pipeline of bash commands, piping output from one to the next.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:54:19.674005-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:54:19.674005-06:00","dependencies":[{"issue_id":"BASHX-svk","depends_on_id":"BASHX-0z6","type":"blocks","created_at":"2026-01-08T06:56:51.834538-06:00","created_by":"nathanclevenger"}]}
{"id":"BASHX-szv","title":"[GREEN] Implement bash_fix handler","description":"Implement the bash_fix MCP tool handler to make the RED phase tests pass. This handler suggests fixes for failed commands based on error output.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:54:22.795641-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:54:22.795641-06:00","dependencies":[{"issue_id":"BASHX-szv","depends_on_id":"BASHX-a1w","type":"blocks","created_at":"2026-01-08T06:56:51.95092-06:00","created_by":"nathanclevenger"}]}
{"id":"BASHX-t2p","title":"[RED] Test bash_undo MCP tool","description":"Write failing RED phase tests for the bash_undo MCP tool. Tests should cover:\n\n- Undo last command\n- Track undoable operations\n- Handle non-undoable commands\n- Undo history/stack\n- Confirm undo operations","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:55:37.091675-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:55:37.091675-06:00"}
{"id":"BASHX-u25","title":"[GREEN] Implement bash_script handler","description":"Implement the bash_script MCP tool handler to make the RED phase tests pass. This handler should execute multi-line bash scripts and return their output.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:55:31.781446-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:55:31.781446-06:00","dependencies":[{"issue_id":"BASHX-u25","depends_on_id":"BASHX-c26","type":"blocks","created_at":"2026-01-08T06:56:53.342294-06:00","created_by":"nathanclevenger"}]}
{"id":"BASHX-u57","title":"[GREEN] Implement bash_which handler","description":"Implement the bash_which MCP tool handler to make the RED phase tests pass. This handler should locate executables in the PATH and return their locations.","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:55:29.435585-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:55:29.435585-06:00","dependencies":[{"issue_id":"BASHX-u57","depends_on_id":"BASHX-831","type":"blocks","created_at":"2026-01-08T06:56:53.228207-06:00","created_by":"nathanclevenger"}]}
{"id":"BASHX-xxb","title":"[RED] Test recovery strategies","description":"Phase 3: Execution Engine - RED tests for recovery strategies\n\n## Tests to implement\n\n### Auto-recovery for common errors\n- Retry transient failures with backoff\n- Create missing directories automatically\n- Handle permission issues with sudo escalation\n- Clear temp files on disk full\n\n### Fallback chains\n- Define fallback command sequences\n- Try alternatives on failure\n- Report which fallback succeeded\n\n### Recovery configuration\n- Configurable retry count\n- Configurable backoff strategy\n- Enable/disable specific recoveries\n\n## Files\n- test/execution/recovery.test.ts\n- src/execution/recovery.ts","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-08T06:54:21.140185-06:00","created_by":"nathanclevenger","updated_at":"2026-01-08T06:54:21.140185-06:00"}
